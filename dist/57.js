"use strict";(self.webpackChunkie104_nft_marketplace=self.webpackChunkie104_nft_marketplace||[]).push([[57],{5153:(e,t,n)=>{n.d(t,{mo:()=>o.m,u4:()=>i.u,yX:()=>l});var r=n(5517),o=n(6138),i=n(4073),l=(n(3458),r.d)},57:(e,t,n)=>{n.d(t,{R:()=>r,y:()=>p});var r,o=n(2037),i=n(1999),l=n(1599),u=n(5928),s=n(8860),c=n(370),a=n(7388),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function l(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,u)}s((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(l=0)),l;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return l.label++,{value:u[1],done:!1};case 5:l.label++,r=u[1],u=[0];continue;case 7:u=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){l=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){l.label=u[1];break}if(6===u[0]&&l.label<o[1]){l.label=o[1],o=u;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(u);break}o[2]&&l.ops.pop(),l.trys.pop();continue}u=t.call(e,l)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};!function(e){e.Container="modal-buy",e.ButtonAccept="modal-buy-ok",e.ButtonClose="modal-buy-close",e.ButtonCancel="modal-buy-cancel",e.OverlayClose="modal-buy-overlay-close",e.ItemName="modal-buy-nft-name",e.ItemPrice="modal-buy-price",e.ItemImage="modal-buy-nft-img",e.ItemAddress="modal-buy-nft-address",e.Fee="modal-buy-fee",e.Total="modal-buy-total"}(r||(r={}));var p=new(function(){function e(e){this.nftItem=e||null,this.listener()}return e.prototype.set=function(e){this.nftItem=e,this.updateDomContent()},e.prototype.get=function(){return this.nftItem},e.prototype.updateDomContent=function(){var e,t,n,i,l,c,a,f=document.getElementById(r.ItemName),d=document.getElementById(r.ItemPrice),p=document.getElementById(r.Total),h=document.getElementById(r.ItemAddress),y=document.getElementById(r.ItemImage);p.innerHTML=(.1*Number(null===(e=this.nftItem)||void 0===e?void 0:e.price)/100+Number(null===(t=this.nftItem)||void 0===t?void 0:t.price)).toFixed(8),f.innerHTML=(null===(n=this.nftItem)||void 0===n?void 0:n.title)||"",d.innerHTML=(null===(i=this.nftItem)||void 0===i?void 0:i.price)||"",h.innerHTML=(0,u.Ve)((null===(l=this.nftItem)||void 0===l?void 0:l.collectionAddress)||""),y.src=(null===(c=this.nftItem)||void 0===c?void 0:c.imageGatewayUrl)||(0,s.S)((null===(a=this.nftItem)||void 0===a?void 0:a.collectionAddress)||o.n)},e.prototype.buy=function(){var e,t,n;return f(this,void 0,void 0,(function(){var r,u,s,f;return d(this,(function(d){switch(d.label){case 0:if(!this.nftItem)throw new Error(o.gz.INPUT_INVALID);if(!(null===(e=this.nftItem)||void 0===e?void 0:e.price))throw new Error(o.gz.SOME_ERROR_HAS_OCCUR);d.label=1;case 1:return d.trys.push([1,3,,4]),[4,(0,i.M$)()];case 2:return d.sent(),a.Fp.listener(),a.Fp.updateAccountAddress(),(0,a.uP)(a.Fp.currentAddress),[3,4];case 3:throw d.sent().message===o.gz.NOT_INSTALLED_METAMASK&&window.open("https://metamask.io/download.html","_blank"),new Error(o.gz.NOT_INSTALLED_METAMASK);case 4:return[4,(0,i.f5)()];case 5:if(r=d.sent(),(null===(n=null===(t=this.nftItem)||void 0===t?void 0:t.seller)||void 0===n?void 0:n.toLowerCase())===(null==r?void 0:r.toLowerCase()))throw new Error(o.gz.OWNER_IS_NOT_VALID);return[4,(0,i.Je)()];case 6:if(!(u=d.sent()))throw new Error(o.gz.CHAIN_ID_INVALID);c.l.open(),d.label=7;case 7:return d.trys.push([7,9,,10]),[4,(0,l.MK)(this.nftItem.collectionAddress,this.nftItem.tokenId,this.nftItem.price,o.UV[u].WUIT,o.UV[u].MARKET)];case 8:return s=d.sent(),console.log(s),this.close(),[3,10];case 9:throw f=d.sent(),console.log(f),f;case 10:return[2]}}))}))},e.prototype.listener=function(){var e=this;document.getElementById(r.Fee).innerHTML="0.1";var t=document.getElementById(r.ButtonCancel),n=document.getElementById(r.ButtonClose),o=document.getElementById(r.OverlayClose);n.addEventListener("click",(function(t){t.preventDefault(),e.close()})),t.addEventListener("click",(function(t){t.preventDefault(),e.close()})),o.addEventListener("click",(function(t){t.preventDefault(),e.close()}))},e.prototype.close=function(){document.getElementById(r.Container).style.display="none"},e.prototype.toggle=function(e){e.preventDefault();var t=document.getElementById(r.Container);"none"===t.style.display?t.style.display="flex":t.style.display="none"},e.prototype.open=function(){document.getElementById(r.Container).style.display="flex"},e}())},1599:(e,t,n)=>{n.d(t,{IF:()=>d,MK:()=>p,rF:()=>f});var r=n(6519),o=n(7705),i=n(5153),l=n(2037),u=(n(7422),n(1743)),s=n(2526),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function l(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,u)}s((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(l=0)),l;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return l.label++,{value:u[1],done:!1};case 5:l.label++,r=u[1],u=[0];continue;case 7:u=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){l=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){l.label=u[1];break}if(6===u[0]&&l.label<o[1]){l.label=o[1],o=u;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(u);break}o[2]&&l.ops.pop(),l.trys.pop();continue}u=t.call(e,l)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};function f(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=10),c(this,void 0,void 0,(function(){var o,l,s,c;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,(0,u.nY)()];case 1:if(!(o=a.sent()))throw new Error("Provider is not found");return[4,new r.CH(e,i.mo,o).viewCollections(t,n)];case 2:return l=a.sent(),s=l.collectionDetails.map((function(e){return{status:e[0],creatorAddress:e[1],whitelistChecker:e[2],tradingFee:Number(BigInt(e[3]).toString())/100,creatorFee:Number(BigInt(e[4]).toString())/100}})),c=l.collectionAddresses,[2,{collectionDetails:s,collectionAddresses:c}];case 3:throw a.sent();case 4:return[2]}}))}))}function d(e,t,n,s){return void 0===n&&(n=0),void 0===s&&(s=10),c(this,void 0,void 0,(function(){var c,f;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,(0,u.nY)()];case 1:if(!(c=a.sent()))throw new Error(l.gz.PROVIDER_IS_NOT_VALID);return[4,new r.CH(e,i.mo,c).viewAsksByCollection(t,n,s)];case 2:return[2,{askInfo:(f=a.sent())[1].map((function(e){return{price:o.dF(e[1].toString()),seller:e[0]}})),tokenIds:f[0].map((function(e){return e.toNumber()})),size:f[2].toNumber()}];case 3:throw a.sent();case 4:return[2]}}))}))}function p(e,t,n,f,d){return c(this,void 0,void 0,(function(){var c,p,h,y,m,v;return a(this,(function(a){switch(a.label){case 0:if(a.trys.push([0,7,,8]),!(c=(0,u.yl)()))throw new Error(l.gz.PROVIDER_IS_NOT_VALID);p=new r.CH(d,i.mo,c.getSigner()),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,s.t)(d,f,o.fi(n).toString())];case 2:return h=a.sent(),console.log(h),[3,4];case 3:throw y=a.sent(),console.log(y),new Error(l.gz.APPROVE_TOKEN_EXCHANGE_FAILED);case 4:return[4,p.buyTokenUsingWrapToken(e,t,o.fi(n))];case 5:return[4,a.sent().wait()];case 6:return m=a.sent(),console.log("buyTokenUsingWrapToken Receipt:",m),[2,m];case 7:throw v=a.sent(),console.log(v),v;case 8:return[2]}}))}))}},2526:(e,t,n)=>{n.d(t,{t:()=>c});var r=n(6519),o=n(5153),i=n(2037),l=n(1743),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function l(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,u)}s((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(l=0)),l;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return l.label++,{value:u[1],done:!1};case 5:l.label++,r=u[1],u=[0];continue;case 7:u=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){l=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){l.label=u[1];break}if(6===u[0]&&l.label<o[1]){l.label=o[1],o=u;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(u);break}o[2]&&l.ops.pop(),l.trys.pop();continue}u=t.call(e,l)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};function c(e,t,n,c){return u(this,void 0,void 0,(function(){var u,c;return s(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,3,,4]),!(u=(0,l.yl)()))throw new Error(i.gz.PROVIDER_IS_NOT_VALID);return[4,new r.CH(t,o.yX,u.getSigner()).approve(e,n)];case 1:return[4,s.sent().wait()];case 2:return c=s.sent(),console.log("approve receipt:",c),[2,c];case 3:throw s.sent();case 4:return[2]}}))}))}}}]);